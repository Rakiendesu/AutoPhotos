{"version":3,"file":"fjGallery.js","sources":["../src/utils/global.js","../node_modules/throttle-debounce/esm/index.js","../node_modules/raf-schd/dist/raf-schd.esm.js","../node_modules/justified-layout/lib/row.js","../node_modules/justified-layout/lib/index.js","../src/utils/ready.js","../src/utils/get-img-dimensions.js","../src/fjGallery.js","../src/fjGallery.umd.js"],"sourcesContent":["/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif ('undefined' !== typeof window) {\n  win = window;\n} else if ('undefined' !== typeof global) {\n  win = global;\n} else if ('undefined' !== typeof self) {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param {number} delay -                  A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher)\n *                                            are most useful.\n * @param {Function} callback -               A function to be executed after delay milliseconds. The `this` context and all arguments are passed through,\n *                                            as-is, to `callback` when the throttled-function is executed.\n * @param {object} [options] -              An object to configure options.\n * @param {boolean} [options.noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds\n *                                            while the throttled-function is being called. If noTrailing is false or unspecified, callback will be executed\n *                                            one final time after the last throttled-function call. (After the throttled-function has not been called for\n *                                            `delay` milliseconds, the internal counter is reset).\n * @param {boolean} [options.noLeading] -   Optional, defaults to false. If noLeading is false, the first throttled-function call will execute callback\n *                                            immediately. If noLeading is true, the first the callback execution will be skipped. It should be noted that\n *                                            callback will never executed if both noLeading = true and noTrailing = true.\n * @param {boolean} [options.debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is\n *                                            false (at end), schedule `callback` to execute after `delay` ms.\n *\n * @returns {Function} A new, throttled, function.\n */\nfunction throttle (delay, callback, options) {\n  var _ref = options || {},\n      _ref$noTrailing = _ref.noTrailing,\n      noTrailing = _ref$noTrailing === void 0 ? false : _ref$noTrailing,\n      _ref$noLeading = _ref.noLeading,\n      noLeading = _ref$noLeading === void 0 ? false : _ref$noLeading,\n      _ref$debounceMode = _ref.debounceMode,\n      debounceMode = _ref$debounceMode === void 0 ? undefined : _ref$debounceMode;\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n\n\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel(options) {\n    var _ref2 = options || {},\n        _ref2$upcomingOnly = _ref2.upcomingOnly,\n        upcomingOnly = _ref2$upcomingOnly === void 0 ? false : _ref2$upcomingOnly;\n\n    clearExistingTimeout();\n    cancelled = !upcomingOnly;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {\n      arguments_[_key] = arguments[_key];\n    }\n\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, arguments_);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (!noLeading && debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`\n       * and noLeading != true.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      if (noLeading) {\n        /*\n         * In throttle mode with noLeading, if `delay` time has\n         * been exceeded, update `lastExec` and schedule `callback`\n         * to execute after `delay` ms.\n         */\n        lastExec = Date.now();\n\n        if (!noTrailing) {\n          timeoutID = setTimeout(debounceMode ? clear : exec, delay);\n        }\n      } else {\n        /*\n         * In throttle mode without noLeading, if `delay` time has been exceeded, execute\n         * `callback`.\n         */\n        exec();\n      }\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param {number} delay -               A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param {Function} callback -          A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                        to `callback` when the debounced-function is executed.\n * @param {object} [options] -           An object to configure options.\n * @param {boolean} [options.atBegin] -  Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                        after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                        (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n *\n * @returns {Function} A new, debounced function.\n */\n\nfunction debounce (delay, callback, options) {\n  var _ref = options || {},\n      _ref$atBegin = _ref.atBegin,\n      atBegin = _ref$atBegin === void 0 ? false : _ref$atBegin;\n\n  return throttle(delay, callback, {\n    debounceMode: atBegin !== false\n  });\n}\n\nexport { debounce, throttle };\n//# sourceMappingURL=index.js.map\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","/*!\n * Copyright 2019 SmugMug, Inc.\n * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.\n * @license\n */\n\n/**\n * Row\n * Wrapper for each row in a justified layout.\n * Stores relevant values and provides methods for calculating layout of individual rows.\n *\n * @param {Object} layoutConfig - The same as that passed\n * @param {Object} Initialization parameters. The following are all required:\n * @param params.top {Number} Top of row, relative to container\n * @param params.left {Number} Left side of row relative to container (equal to container left padding)\n * @param params.width {Number} Width of row, not including container padding\n * @param params.spacing {Number} Horizontal spacing between items\n * @param params.targetRowHeight {Number} Layout algorithm will aim for this row height\n * @param params.targetRowHeightTolerance {Number} Row heights may vary +/- (`targetRowHeight` x `targetRowHeightTolerance`)\n * @param params.edgeCaseMinRowHeight {Number} Absolute minimum row height for edge cases that cannot be resolved within tolerance.\n * @param params.edgeCaseMaxRowHeight {Number} Absolute maximum row height for edge cases that cannot be resolved within tolerance.\n * @param params.isBreakoutRow {Boolean} Is this row in particular one of those breakout rows? Always false if it's not that kind of photo list\n * @param params.widowLayoutStyle {String} If widows are visible, how should they be laid out?\n * @constructor\n */\n\nvar Row = module.exports = function (params) {\n\n\t// Top of row, relative to container\n\tthis.top = params.top;\n\n\t// Left side of row relative to container (equal to container left padding)\n\tthis.left = params.left;\n\n\t// Width of row, not including container padding\n\tthis.width = params.width;\n\n\t// Horizontal spacing between items\n\tthis.spacing = params.spacing;\n\n\t// Row height calculation values\n\tthis.targetRowHeight = params.targetRowHeight;\n\tthis.targetRowHeightTolerance = params.targetRowHeightTolerance;\n\tthis.minAspectRatio = this.width / params.targetRowHeight * (1 - params.targetRowHeightTolerance);\n\tthis.maxAspectRatio = this.width / params.targetRowHeight * (1 + params.targetRowHeightTolerance);\n\n\t// Edge case row height minimum/maximum\n\tthis.edgeCaseMinRowHeight = params.edgeCaseMinRowHeight;\n\tthis.edgeCaseMaxRowHeight = params.edgeCaseMaxRowHeight;\n\n\t// Widow layout direction\n\tthis.widowLayoutStyle = params.widowLayoutStyle;\n\n\t// Full width breakout rows\n\tthis.isBreakoutRow = params.isBreakoutRow;\n\n\t// Store layout data for each item in row\n\tthis.items = [];\n\n\t// Height remains at 0 until it's been calculated\n\tthis.height = 0;\n\n};\n\nRow.prototype = {\n\n\t/**\n\t * Attempt to add a single item to the row.\n\t * This is the heart of the justified algorithm.\n\t * This method is direction-agnostic; it deals only with sizes, not positions.\n\t *\n\t * If the item fits in the row, without pushing row height beyond min/max tolerance,\n\t * the item is added and the method returns true.\n\t *\n\t * If the item leaves row height too high, there may be room to scale it down and add another item.\n\t * In this case, the item is added and the method returns true, but the row is incomplete.\n\t *\n\t * If the item leaves row height too short, there are too many items to fit within tolerance.\n\t * The method will either accept or reject the new item, favoring the resulting row height closest to within tolerance.\n\t * If the item is rejected, left/right padding will be required to fit the row height within tolerance;\n\t * if the item is accepted, top/bottom cropping will be required to fit the row height within tolerance.\n\t *\n\t * @method addItem\n\t * @param itemData {Object} Item layout data, containing item aspect ratio.\n\t * @return {Boolean} True if successfully added; false if rejected.\n\t */\n\n\taddItem: function (itemData) {\n\n\t\tvar newItems = this.items.concat(itemData),\n\t\t\t// Calculate aspect ratios for items only; exclude spacing\n\t\t\trowWidthWithoutSpacing = this.width - (newItems.length - 1) * this.spacing,\n\t\t\tnewAspectRatio = newItems.reduce(function (sum, item) {\n\t\t\t\treturn sum + item.aspectRatio;\n\t\t\t}, 0),\n\t\t\ttargetAspectRatio = rowWidthWithoutSpacing / this.targetRowHeight,\n\t\t\tpreviousRowWidthWithoutSpacing,\n\t\t\tpreviousAspectRatio,\n\t\t\tpreviousTargetAspectRatio;\n\n\t\t// Handle big full-width breakout photos if we're doing them\n\t\tif (this.isBreakoutRow) {\n\t\t\t// Only do it if there's no other items in this row\n\t\t\tif (this.items.length === 0) {\n\t\t\t\t// Only go full width if this photo is a square or landscape\n\t\t\t\tif (itemData.aspectRatio >= 1) {\n\t\t\t\t\t// Close out the row with a full width photo\n\t\t\t\t\tthis.items.push(itemData);\n\t\t\t\t\tthis.completeLayout(rowWidthWithoutSpacing / itemData.aspectRatio, 'justify');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (newAspectRatio < this.minAspectRatio) {\n\n\t\t\t// New aspect ratio is too narrow / scaled row height is too tall.\n\t\t\t// Accept this item and leave row open for more items.\n\n\t\t\tthis.items.push(Object.assign({}, itemData));\n\t\t\treturn true;\n\n\t\t} else if (newAspectRatio > this.maxAspectRatio) {\n\n\t\t\t// New aspect ratio is too wide / scaled row height will be too short.\n\t\t\t// Accept item if the resulting aspect ratio is closer to target than it would be without the item.\n\t\t\t// NOTE: Any row that falls into this block will require cropping/padding on individual items.\n\n\t\t\tif (this.items.length === 0) {\n\n\t\t\t\t// When there are no existing items, force acceptance of the new item and complete the layout.\n\t\t\t\t// This is the pano special case.\n\t\t\t\tthis.items.push(Object.assign({}, itemData));\n\t\t\t\tthis.completeLayout(rowWidthWithoutSpacing / newAspectRatio, 'justify');\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// Calculate width/aspect ratio for row before adding new item\n\t\t\tpreviousRowWidthWithoutSpacing = this.width - (this.items.length - 1) * this.spacing;\n\t\t\tpreviousAspectRatio = this.items.reduce(function (sum, item) {\n\t\t\t\treturn sum + item.aspectRatio;\n\t\t\t}, 0);\n\t\t\tpreviousTargetAspectRatio = previousRowWidthWithoutSpacing / this.targetRowHeight;\n\n\t\t\tif (Math.abs(newAspectRatio - targetAspectRatio) > Math.abs(previousAspectRatio - previousTargetAspectRatio)) {\n\n\t\t\t\t// Row with new item is us farther away from target than row without; complete layout and reject item.\n\t\t\t\tthis.completeLayout(previousRowWidthWithoutSpacing / previousAspectRatio, 'justify');\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Row with new item is us closer to target than row without;\n\t\t\t\t// accept the new item and complete the row layout.\n\t\t\t\tthis.items.push(Object.assign({}, itemData));\n\t\t\t\tthis.completeLayout(rowWidthWithoutSpacing / newAspectRatio, 'justify');\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// New aspect ratio / scaled row height is within tolerance;\n\t\t\t// accept the new item and complete the row layout.\n\t\t\tthis.items.push(Object.assign({}, itemData));\n\t\t\tthis.completeLayout(rowWidthWithoutSpacing / newAspectRatio, 'justify');\n\t\t\treturn true;\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Check if a row has completed its layout.\n\t *\n\t * @method isLayoutComplete\n\t * @return {Boolean} True if complete; false if not.\n\t */\n\n\tisLayoutComplete: function () {\n\t\treturn this.height > 0;\n\t},\n\n\t/**\n\t * Set row height and compute item geometry from that height.\n\t * Will justify items within the row unless instructed not to.\n\t *\n\t * @method completeLayout\n\t * @param newHeight {Number} Set row height to this value.\n\t * @param widowLayoutStyle {String} How should widows display? Supported: left | justify | center\n\t */\n\n\tcompleteLayout: function (newHeight, widowLayoutStyle) {\n\n\t\tvar itemWidthSum = this.left,\n\t\t\trowWidthWithoutSpacing = this.width - (this.items.length - 1) * this.spacing,\n\t\t\tclampedToNativeRatio,\n\t\t\tclampedHeight,\n\t\t\terrorWidthPerItem,\n\t\t\troundedCumulativeErrors,\n\t\t\tsingleItemGeometry,\n\t\t\tcenterOffset;\n\n\t\t// Justify unless explicitly specified otherwise.\n\t\tif (typeof widowLayoutStyle === 'undefined' || ['justify', 'center', 'left'].indexOf(widowLayoutStyle) < 0) {\n\t\t\twidowLayoutStyle = 'left';\n\t\t}\n\n\t\t// Clamp row height to edge case minimum/maximum.\n\t\tclampedHeight = Math.max(this.edgeCaseMinRowHeight, Math.min(newHeight, this.edgeCaseMaxRowHeight));\n\n\t\tif (newHeight !== clampedHeight) {\n\n\t\t\t// If row height was clamped, the resulting row/item aspect ratio will be off,\n\t\t\t// so force it to fit the width (recalculate aspectRatio to match clamped height).\n\t\t\t// NOTE: this will result in cropping/padding commensurate to the amount of clamping.\n\t\t\tthis.height = clampedHeight;\n\t\t\tclampedToNativeRatio = (rowWidthWithoutSpacing / clampedHeight) / (rowWidthWithoutSpacing / newHeight);\n\n\t\t} else {\n\n\t\t\t// If not clamped, leave ratio at 1.0.\n\t\t\tthis.height = newHeight;\n\t\t\tclampedToNativeRatio = 1.0;\n\n\t\t}\n\n\t\t// Compute item geometry based on newHeight.\n\t\tthis.items.forEach(function (item) {\n\n\t\t\titem.top = this.top;\n\t\t\titem.width = item.aspectRatio * this.height * clampedToNativeRatio;\n\t\t\titem.height = this.height;\n\n\t\t\t// Left-to-right.\n\t\t\t// TODO right to left\n\t\t\t// item.left = this.width - itemWidthSum - item.width;\n\t\t\titem.left = itemWidthSum;\n\n\t\t\t// Increment width.\n\t\t\titemWidthSum += item.width + this.spacing;\n\n\t\t}, this);\n\n\t\t// If specified, ensure items fill row and distribute error\n\t\t// caused by rounding width and height across all items.\n\t\tif (widowLayoutStyle === 'justify') {\n\n\t\t\titemWidthSum -= (this.spacing + this.left);\n\n\t\t\terrorWidthPerItem = (itemWidthSum - this.width) / this.items.length;\n\t\t\troundedCumulativeErrors = this.items.map(function (item, i) {\n\t\t\t\treturn Math.round((i + 1) * errorWidthPerItem);\n\t\t\t});\n\n\n\t\t\tif (this.items.length === 1) {\n\n\t\t\t\t// For rows with only one item, adjust item width to fill row.\n\t\t\t\tsingleItemGeometry = this.items[0];\n\t\t\t\tsingleItemGeometry.width -= Math.round(errorWidthPerItem);\n\n\t\t\t} else {\n\n\t\t\t\t// For rows with multiple items, adjust item width and shift items to fill the row,\n\t\t\t\t// while maintaining equal spacing between items in the row.\n\t\t\t\tthis.items.forEach(function (item, i) {\n\t\t\t\t\tif (i > 0) {\n\t\t\t\t\t\titem.left -= roundedCumulativeErrors[i - 1];\n\t\t\t\t\t\titem.width -= (roundedCumulativeErrors[i] - roundedCumulativeErrors[i - 1]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.width -= roundedCumulativeErrors[i];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t} else if (widowLayoutStyle === 'center') {\n\n\t\t\t// Center widows\n\t\t\tcenterOffset = (this.width - itemWidthSum) / 2;\n\n\t\t\tthis.items.forEach(function (item) {\n\t\t\t\titem.left += centerOffset + this.spacing;\n\t\t\t}, this);\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Force completion of row layout with current items.\n\t *\n\t * @method forceComplete\n\t * @param fitToWidth {Boolean} Stretch current items to fill the row width.\n\t *                             This will likely result in padding.\n\t * @param fitToWidth {Number}\n\t */\n\n\tforceComplete: function (fitToWidth, rowHeight) {\n\n\t\t// TODO Handle fitting to width\n\t\t// var rowWidthWithoutSpacing = this.width - (this.items.length - 1) * this.spacing,\n\t\t// \tcurrentAspectRatio = this.items.reduce(function (sum, item) {\n\t\t// \t\treturn sum + item.aspectRatio;\n\t\t// \t}, 0);\n\n\t\tif (typeof rowHeight === 'number') {\n\n\t\t\tthis.completeLayout(rowHeight, this.widowLayoutStyle);\n\n\t\t} else {\n\n\t\t\t// Complete using target row height.\n\t\t\tthis.completeLayout(this.targetRowHeight, this.widowLayoutStyle);\n\t\t}\n\n\t},\n\n\t/**\n\t * Return layout data for items within row.\n\t * Note: returns actual list, not a copy.\n\t *\n\t * @method getItems\n\t * @return Layout data for items within row.\n\t */\n\n\tgetItems: function () {\n\t\treturn this.items;\n\t}\n\n};\n","/*!\n * Copyright 2019 SmugMug, Inc.\n * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.\n * @license\n */\n\n'use strict';\n\nvar Row = require('./row');\n\n/**\n * Create a new, empty row.\n *\n * @method createNewRow\n * @param layoutConfig {Object} The layout configuration\n * @param layoutData {Object} The current state of the layout\n * @return A new, empty row of the type specified by this layout.\n */\n\nfunction createNewRow(layoutConfig, layoutData) {\n\n\tvar isBreakoutRow;\n\n\t// Work out if this is a full width breakout row\n\tif (layoutConfig.fullWidthBreakoutRowCadence !== false) {\n\t\tif (((layoutData._rows.length + 1) % layoutConfig.fullWidthBreakoutRowCadence) === 0) {\n\t\t\tisBreakoutRow = true;\n\t\t}\n\t}\n\n\treturn new Row({\n\t\ttop: layoutData._containerHeight,\n\t\tleft: layoutConfig.containerPadding.left,\n\t\twidth: layoutConfig.containerWidth - layoutConfig.containerPadding.left - layoutConfig.containerPadding.right,\n\t\tspacing: layoutConfig.boxSpacing.horizontal,\n\t\ttargetRowHeight: layoutConfig.targetRowHeight,\n\t\ttargetRowHeightTolerance: layoutConfig.targetRowHeightTolerance,\n\t\tedgeCaseMinRowHeight: 0.5 * layoutConfig.targetRowHeight,\n\t\tedgeCaseMaxRowHeight: 2 * layoutConfig.targetRowHeight,\n\t\trightToLeft: false,\n\t\tisBreakoutRow: isBreakoutRow,\n\t\twidowLayoutStyle: layoutConfig.widowLayoutStyle\n\t});\n}\n\n/**\n * Add a completed row to the layout.\n * Note: the row must have already been completed.\n *\n * @method addRow\n * @param layoutConfig {Object} The layout configuration\n * @param layoutData {Object} The current state of the layout\n * @param row {Row} The row to add.\n * @return {Array} Each item added to the row.\n */\n\nfunction addRow(layoutConfig, layoutData, row) {\n\n\tlayoutData._rows.push(row);\n\tlayoutData._layoutItems = layoutData._layoutItems.concat(row.getItems());\n\n\t// Increment the container height\n\tlayoutData._containerHeight += row.height + layoutConfig.boxSpacing.vertical;\n\n\treturn row.items;\n}\n\n/**\n * Calculate the current layout for all items in the list that require layout.\n * \"Layout\" means geometry: position within container and size\n *\n * @method computeLayout\n * @param layoutConfig {Object} The layout configuration\n * @param layoutData {Object} The current state of the layout\n * @param itemLayoutData {Array} Array of items to lay out, with data required to lay out each item\n * @return {Object} The newly-calculated layout, containing the new container height, and lists of layout items\n */\n\nfunction computeLayout(layoutConfig, layoutData, itemLayoutData) {\n\n\tvar laidOutItems = [],\n\t\titemAdded,\n\t\tcurrentRow,\n\t\tnextToLastRowHeight;\n\n\t// Apply forced aspect ratio if specified, and set a flag.\n\tif (layoutConfig.forceAspectRatio) {\n\t\titemLayoutData.forEach(function (itemData) {\n\t\t\titemData.forcedAspectRatio = true;\n\t\t\titemData.aspectRatio = layoutConfig.forceAspectRatio;\n\t\t});\n\t}\n\n\t// Loop through the items\n\titemLayoutData.some(function (itemData, i) {\n\n\t\tif (isNaN(itemData.aspectRatio)) {\n\t\t\tthrow new Error(\"Item \" + i + \" has an invalid aspect ratio\");\n\t\t}\n\n\t\t// If not currently building up a row, make a new one.\n\t\tif (!currentRow) {\n\t\t\tcurrentRow = createNewRow(layoutConfig, layoutData);\n\t\t}\n\n\t\t// Attempt to add item to the current row.\n\t\titemAdded = currentRow.addItem(itemData);\n\n\t\tif (currentRow.isLayoutComplete()) {\n\n\t\t\t// Row is filled; add it and start a new one\n\t\t\tlaidOutItems = laidOutItems.concat(addRow(layoutConfig, layoutData, currentRow));\n\n\t\t\tif (layoutData._rows.length >= layoutConfig.maxNumRows) {\n\t\t\t\tcurrentRow = null;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcurrentRow = createNewRow(layoutConfig, layoutData);\n\n\t\t\t// Item was rejected; add it to its own row\n\t\t\tif (!itemAdded) {\n\n\t\t\t\titemAdded = currentRow.addItem(itemData);\n\n\t\t\t\tif (currentRow.isLayoutComplete()) {\n\n\t\t\t\t\t// If the rejected item fills a row on its own, add the row and start another new one\n\t\t\t\t\tlaidOutItems = laidOutItems.concat(addRow(layoutConfig, layoutData, currentRow));\n\t\t\t\t\tif (layoutData._rows.length >= layoutConfig.maxNumRows) {\n\t\t\t\t\t\tcurrentRow = null;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentRow = createNewRow(layoutConfig, layoutData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t});\n\n\t// Handle any leftover content (orphans) depending on where they lie\n\t// in this layout update, and in the total content set.\n\tif (currentRow && currentRow.getItems().length && layoutConfig.showWidows) {\n\n\t\t// Last page of all content or orphan suppression is suppressed; lay out orphans.\n\t\tif (layoutData._rows.length) {\n\n\t\t\t// Only Match previous row's height if it exists and it isn't a breakout row\n\t\t\tif (layoutData._rows[layoutData._rows.length - 1].isBreakoutRow) {\n\t\t\t\tnextToLastRowHeight = layoutData._rows[layoutData._rows.length - 1].targetRowHeight;\n\t\t\t} else {\n\t\t\t\tnextToLastRowHeight = layoutData._rows[layoutData._rows.length - 1].height;\n\t\t\t}\n\n\t\t\tcurrentRow.forceComplete(false, nextToLastRowHeight);\n\n\t\t} else {\n\n\t\t\t// ...else use target height if there is no other row height to reference.\n\t\t\tcurrentRow.forceComplete(false);\n\n\t\t}\n\n\t\tlaidOutItems = laidOutItems.concat(addRow(layoutConfig, layoutData, currentRow));\n\t\tlayoutConfig._widowCount = currentRow.getItems().length;\n\n\t}\n\n\t// We need to clean up the bottom container padding\n\t// First remove the height added for box spacing\n\tlayoutData._containerHeight = layoutData._containerHeight - layoutConfig.boxSpacing.vertical;\n\t// Then add our bottom container padding\n\tlayoutData._containerHeight = layoutData._containerHeight + layoutConfig.containerPadding.bottom;\n\n\treturn {\n\t\tcontainerHeight: layoutData._containerHeight,\n\t\twidowCount: layoutConfig._widowCount,\n\t\tboxes: layoutData._layoutItems\n\t};\n\n}\n\n/**\n * Takes in a bunch of box data and config. Returns\n * geometry to lay them out in a justified view.\n *\n * @method covertSizesToAspectRatios\n * @param sizes {Array} Array of objects with widths and heights\n * @return {Array} A list of aspect ratios\n */\n\nmodule.exports = function (input, config) {\n\tvar layoutConfig = {};\n\tvar layoutData = {};\n\n\t// Defaults\n\tvar defaults = {\n\t\tcontainerWidth: 1060,\n\t\tcontainerPadding: 10,\n\t\tboxSpacing: 10,\n\t\ttargetRowHeight: 320,\n\t\ttargetRowHeightTolerance: 0.25,\n\t\tmaxNumRows: Number.POSITIVE_INFINITY,\n\t\tforceAspectRatio: false,\n\t\tshowWidows: true,\n\t\tfullWidthBreakoutRowCadence: false,\n\t\twidowLayoutStyle: 'left'\n\t};\n\n\tvar containerPadding = {};\n\tvar boxSpacing = {};\n\n\tconfig = config || {};\n\n\t// Merge defaults and config passed in\n\tlayoutConfig = Object.assign(defaults, config);\n\n\t// Sort out padding and spacing values\n\tcontainerPadding.top = (!isNaN(parseFloat(layoutConfig.containerPadding.top))) ? layoutConfig.containerPadding.top : layoutConfig.containerPadding;\n\tcontainerPadding.right = (!isNaN(parseFloat(layoutConfig.containerPadding.right))) ? layoutConfig.containerPadding.right : layoutConfig.containerPadding;\n\tcontainerPadding.bottom = (!isNaN(parseFloat(layoutConfig.containerPadding.bottom))) ? layoutConfig.containerPadding.bottom : layoutConfig.containerPadding;\n\tcontainerPadding.left = (!isNaN(parseFloat(layoutConfig.containerPadding.left))) ? layoutConfig.containerPadding.left : layoutConfig.containerPadding;\n\tboxSpacing.horizontal = (!isNaN(parseFloat(layoutConfig.boxSpacing.horizontal))) ? layoutConfig.boxSpacing.horizontal : layoutConfig.boxSpacing;\n\tboxSpacing.vertical = (!isNaN(parseFloat(layoutConfig.boxSpacing.vertical))) ? layoutConfig.boxSpacing.vertical : layoutConfig.boxSpacing;\n\n\tlayoutConfig.containerPadding = containerPadding;\n\tlayoutConfig.boxSpacing = boxSpacing;\n\n\t// Local\n\tlayoutData._layoutItems = [];\n\tlayoutData._awakeItems = [];\n\tlayoutData._inViewportItems = [];\n\tlayoutData._leadingOrphans = [];\n\tlayoutData._trailingOrphans = [];\n\tlayoutData._containerHeight = layoutConfig.containerPadding.top;\n\tlayoutData._rows = [];\n\tlayoutData._orphans = [];\n\tlayoutConfig._widowCount = 0;\n\n\t// Convert widths and heights to aspect ratios if we need to\n\treturn computeLayout(layoutConfig, layoutData, input.map(function (item) {\n\t\tif (item.width && item.height) {\n\t\t\treturn { aspectRatio: item.width / item.height };\n\t\t} else {\n\t\t\treturn { aspectRatio: item };\n\t\t}\n\t}));\n};\n","function ready(callback) {\n  if ('complete' === document.readyState || 'interactive' === document.readyState) {\n    // Already ready or interactive, execute callback\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback, {\n      capture: true,\n      once: true,\n      passive: true,\n    });\n  }\n}\n\nexport default ready;\n","// get image dimensions\n// thanks https://gist.github.com/dimsemenov/5382856\nfunction getImgDimensions(img, cb) {\n  let interval;\n  let hasSize = false;\n  let addedListeners = false;\n\n  const onHasSize = () => {\n    if (hasSize) {\n      cb(hasSize);\n      return;\n    }\n\n    // check for non-zero, non-undefined naturalWidth\n    if (!img.naturalWidth) {\n      return;\n    }\n\n    hasSize = {\n      width: img.naturalWidth,\n      height: img.naturalHeight,\n    };\n    cb(hasSize);\n\n    clearInterval(interval);\n    if (addedListeners) {\n      // eslint-disable-next-line no-use-before-define\n      removeListeners();\n    }\n  };\n  const onLoaded = () => {\n    onHasSize();\n  };\n  const onError = () => {\n    onHasSize();\n  };\n  const checkSize = () => {\n    if (0 < img.naturalWidth) {\n      onHasSize();\n    }\n  };\n  const addListeners = () => {\n    addedListeners = true;\n    img.addEventListener('load', onLoaded);\n    img.addEventListener('error', onError);\n  };\n  const removeListeners = () => {\n    addedListeners = false;\n    img.removeEventListener('load', onLoaded);\n    img.removeEventListener('error', onError);\n  };\n\n  checkSize();\n\n  if (!hasSize) {\n    addListeners();\n    interval = setInterval(checkSize, 100);\n  }\n}\n\nexport default getImgDimensions;\n","import { debounce } from 'throttle-debounce';\nimport rafSchd from 'raf-schd';\nimport justifiedLayout from 'justified-layout';\n\nimport domReady from './utils/ready';\nimport global from './utils/global';\nimport getImgDimensions from './utils/get-img-dimensions';\n\n// list with all fjGallery instances\n// need to render all in one scroll/resize event\nconst fjGalleryList = [];\n\nconst updateFjGallery = rafSchd(() => {\n  fjGalleryList.forEach((item) => {\n    item.resize();\n  });\n});\n\nglobal.addEventListener('resize', updateFjGallery);\nglobal.addEventListener('orientationchange', updateFjGallery);\nglobal.addEventListener('load', updateFjGallery);\ndomReady(() => {\n  updateFjGallery();\n});\n\nlet instanceID = 0;\n\n// fjGallery class\nclass FJGallery {\n  constructor(container, userOptions) {\n    const self = this;\n\n    self.instanceID = instanceID;\n    instanceID += 1;\n\n    self.$container = container;\n\n    self.images = [];\n\n    self.defaults = {\n      itemSelector: '.fj-gallery-item',\n      imageSelector: 'img',\n      gutter: 10, // supports object like `{ horizontal: 10, vertical: 10 }`.\n      rowHeight: 320,\n      rowHeightTolerance: 0.25, // [0, 1]\n      maxRowsCount: Number.POSITIVE_INFINITY,\n      lastRow: 'left', // left, center, right, hide\n      transitionDuration: '0.3s',\n      calculateItemsHeight: false,\n      resizeDebounce: 100,\n      isRtl: 'rtl' === self.css(self.$container, 'direction'),\n\n      // events\n      onInit: null, // function() {}\n      onDestroy: null, // function() {}\n      onAppendImages: null, // function() {}\n      onBeforeJustify: null, // function() {}\n      onJustify: null, // function() {}\n    };\n\n    // prepare data-options\n    const dataOptions = self.$container.dataset || {};\n    const pureDataOptions = {};\n    Object.keys(dataOptions).forEach((key) => {\n      const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\n      if (loweCaseOption && 'undefined' !== typeof self.defaults[loweCaseOption]) {\n        pureDataOptions[loweCaseOption] = dataOptions[key];\n      }\n    });\n\n    self.options = {\n      ...self.defaults,\n      ...pureDataOptions,\n      ...userOptions,\n    };\n\n    self.pureOptions = {\n      ...self.options,\n    };\n\n    // debounce for resize\n    self.resize = debounce(self.options.resizeDebounce, self.resize);\n    self.justify = rafSchd(self.justify.bind(self));\n\n    self.init();\n  }\n\n  // add styles to element\n  // eslint-disable-next-line class-methods-use-this\n  css(el, styles) {\n    if ('string' === typeof styles) {\n      return global.getComputedStyle(el).getPropertyValue(styles);\n    }\n\n    Object.keys(styles).forEach((key) => {\n      el.style[key] = styles[key];\n    });\n    return el;\n  }\n\n  // set temporary transition with event listener\n  applyTransition($item, properties) {\n    const self = this;\n\n    // Remove previous event listener\n    self.onTransitionEnd($item)();\n\n    // Add transitions\n    self.css($item, {\n      'transition-property': properties.join(', '),\n      'transition-duration': self.options.transitionDuration,\n    });\n\n    // Add event listener\n    $item.addEventListener('transitionend', self.onTransitionEnd($item, properties), false);\n  }\n\n  onTransitionEnd($item) {\n    const self = this;\n\n    return () => {\n      self.css($item, {\n        'transition-property': '',\n        'transition-duration': '',\n      });\n\n      $item.removeEventListener('transitionend', self.onTransitionEnd($item));\n    };\n  }\n\n  // add to fjGallery instances list\n  addToFjGalleryList() {\n    fjGalleryList.push(this);\n    updateFjGallery();\n  }\n\n  // remove from fjGallery instances list\n  removeFromFjGalleryList() {\n    const self = this;\n\n    fjGalleryList.forEach((item, key) => {\n      if (item.instanceID === self.instanceID) {\n        fjGalleryList.splice(key, 1);\n      }\n    });\n  }\n\n  init() {\n    const self = this;\n\n    self.appendImages(self.$container.querySelectorAll(self.options.itemSelector));\n\n    self.addToFjGalleryList();\n\n    // call onInit event\n    if (self.options.onInit) {\n      self.options.onInit.call(self);\n    }\n  }\n\n  // append images\n  appendImages($images) {\n    const self = this;\n\n    // check if jQuery\n    if (global.jQuery && $images instanceof global.jQuery) {\n      $images = $images.get();\n    }\n\n    if (!$images || !$images.length) {\n      return;\n    }\n\n    $images.forEach(($item) => {\n      // if $images is jQuery, for some reason in this array there is undefined item, that not a DOM,\n      // so we need to check for $item.querySelector.\n      if ($item && !$item.fjGalleryImage && $item.querySelector) {\n        const $image = $item.querySelector(self.options.imageSelector);\n\n        if ($image) {\n          $item.fjGalleryImage = self;\n          const data = {\n            $item,\n            $image,\n            width: parseFloat($image.getAttribute('width')) || false,\n            height: parseFloat($image.getAttribute('height')) || false,\n            loadSizes() {\n              const itemData = this;\n              getImgDimensions($image, (dimensions) => {\n                if (itemData.width !== dimensions.width || itemData.height !== dimensions.height) {\n                  itemData.width = dimensions.width;\n                  itemData.height = dimensions.height;\n                  self.resize();\n                }\n              });\n            },\n          };\n          data.loadSizes();\n\n          self.images.push(data);\n        }\n      }\n    });\n\n    // call onAppendImages event\n    if (self.options.onAppendImages) {\n      self.options.onAppendImages.call(self, [$images]);\n    }\n\n    self.justify();\n  }\n\n  // justify images\n  justify() {\n    const self = this;\n    const justifyArray = [];\n\n    self.justifyCount = (self.justifyCount || 0) + 1;\n\n    // call onBeforeJustify event\n    if (self.options.onBeforeJustify) {\n      self.options.onBeforeJustify.call(self);\n    }\n\n    self.images.forEach((data) => {\n      if (data.width && data.height) {\n        justifyArray.push(data.width / data.height);\n      }\n    });\n\n    const justifiedOptions = {\n      containerWidth: self.$container.getBoundingClientRect().width,\n      containerPadding: {\n        top: parseFloat(self.css(self.$container, 'padding-top')) || 0,\n        right: parseFloat(self.css(self.$container, 'padding-right')) || 0,\n        bottom: parseFloat(self.css(self.$container, 'padding-bottom')) || 0,\n        left: parseFloat(self.css(self.$container, 'padding-left')) || 0,\n      },\n      boxSpacing: self.options.gutter,\n      targetRowHeight: self.options.rowHeight,\n      targetRowHeightTolerance: self.options.rowHeightTolerance,\n      maxNumRows: self.options.maxRowsCount,\n      showWidows: 'hide' !== self.options.lastRow,\n    };\n    const justifiedData = justifiedLayout(justifyArray, justifiedOptions);\n\n    // Align last row\n    if (\n      justifiedData.widowCount &&\n      ('center' === self.options.lastRow || 'right' === self.options.lastRow)\n    ) {\n      const lastItemData = justifiedData.boxes[justifiedData.boxes.length - 1];\n      let gapSize = justifiedOptions.containerWidth - lastItemData.width - lastItemData.left;\n\n      if ('center' === self.options.lastRow) {\n        gapSize /= 2;\n      }\n      if ('right' === self.options.lastRow) {\n        gapSize -= justifiedOptions.containerPadding.right;\n      }\n\n      for (let i = 1; i <= justifiedData.widowCount; i += 1) {\n        justifiedData.boxes[justifiedData.boxes.length - i].left =\n          justifiedData.boxes[justifiedData.boxes.length - i].left + gapSize;\n      }\n    }\n\n    // RTL compatibility\n    if (self.options.isRtl) {\n      justifiedData.boxes.forEach((boxData, i) => {\n        justifiedData.boxes[i].left =\n          justifiedOptions.containerWidth -\n          justifiedData.boxes[i].left -\n          justifiedData.boxes[i].width -\n          justifiedOptions.containerPadding.right +\n          justifiedOptions.containerPadding.left;\n      });\n    }\n\n    let i = 0;\n    let additionalTopOffset = 0;\n    const rowsMaxHeight = {};\n\n    // Set image sizes.\n    self.images.forEach((data, imgI) => {\n      if (justifiedData.boxes[i] && data.width && data.height) {\n        // calculate additional offset based on actual items height.\n        if (\n          self.options.calculateItemsHeight &&\n          'undefined' === typeof rowsMaxHeight[justifiedData.boxes[i].top] &&\n          Object.keys(rowsMaxHeight).length\n        ) {\n          additionalTopOffset +=\n            rowsMaxHeight[Object.keys(rowsMaxHeight).pop()] - justifiedData.boxes[imgI - 1].height;\n        }\n\n        if (self.options.transitionDuration && 1 < self.justifyCount) {\n          self.applyTransition(data.$item, ['transform']);\n        }\n\n        self.css(data.$item, {\n          display: '',\n          position: 'absolute',\n          transform: `translateX(${justifiedData.boxes[i].left}px) translateY(${\n            justifiedData.boxes[i].top + additionalTopOffset\n          }px) translateZ(0)`,\n          width: `${justifiedData.boxes[i].width}px`,\n        });\n\n        // calculate actual items height.\n        if (self.options.calculateItemsHeight) {\n          const rect = data.$item.getBoundingClientRect();\n\n          if (\n            'undefined' === typeof rowsMaxHeight[justifiedData.boxes[i].top] ||\n            rowsMaxHeight[justifiedData.boxes[i].top] < rect.height\n          ) {\n            rowsMaxHeight[justifiedData.boxes[i].top] = rect.height;\n          }\n        }\n\n        i += 1;\n      } else {\n        self.css(data.$item, {\n          display: 'none',\n        });\n      }\n    });\n\n    // increase additional offset based on the latest row items height.\n    if (self.options.calculateItemsHeight && Object.keys(rowsMaxHeight).length) {\n      additionalTopOffset +=\n        rowsMaxHeight[Object.keys(rowsMaxHeight).pop()] -\n        justifiedData.boxes[justifiedData.boxes.length - 1].height;\n    }\n\n    if (self.options.transitionDuration) {\n      self.applyTransition(self.$container, ['height']);\n    }\n\n    // Set container height.\n    self.css(self.$container, {\n      height: `${justifiedData.containerHeight + additionalTopOffset}px`,\n    });\n\n    // call onJustify event\n    if (self.options.onJustify) {\n      self.options.onJustify.call(self);\n    }\n  }\n\n  // update options and resize gallery items\n  updateOptions(options) {\n    const self = this;\n    self.options = {\n      ...self.options,\n      ...options,\n    };\n    self.justify();\n  }\n\n  destroy() {\n    const self = this;\n\n    self.removeFromFjGalleryList();\n\n    self.justifyCount = 0;\n\n    // call onDestroy event\n    if (self.options.onDestroy) {\n      self.options.onDestroy.call(self);\n    }\n\n    // remove styles.\n    self.css(self.$container, {\n      height: '',\n      transition: '',\n    });\n    self.images.forEach((data) => {\n      self.css(data.$item, {\n        position: '',\n        transform: '',\n        transition: '',\n        width: '',\n        height: '',\n      });\n    });\n\n    // delete fjGalleryImage instance from images\n    self.images.forEach((val) => {\n      delete val.$item.fjGalleryImage;\n    });\n\n    // delete fjGallery instance from container\n    delete self.$container.fjGallery;\n  }\n\n  resize() {\n    const self = this;\n\n    self.justify();\n  }\n}\n\n// global definition\nconst fjGallery = function (items, options, ...args) {\n  // check for dom element\n  // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  if (\n    'object' === typeof HTMLElement\n      ? items instanceof HTMLElement\n      : items &&\n        'object' === typeof items &&\n        null !== items &&\n        1 === items.nodeType &&\n        'string' === typeof items.nodeName\n  ) {\n    items = [items];\n  }\n\n  const len = items.length;\n  let k = 0;\n  let ret;\n\n  for (k; k < len; k += 1) {\n    if ('object' === typeof options || 'undefined' === typeof options) {\n      if (!items[k].fjGallery) {\n        // eslint-disable-next-line new-cap\n        items[k].fjGallery = new FJGallery(items[k], options);\n      }\n    } else if (items[k].fjGallery) {\n      // eslint-disable-next-line prefer-spread\n      ret = items[k].fjGallery[options].apply(items[k].fjGallery, args);\n    }\n    if ('undefined' !== typeof ret) {\n      return ret;\n    }\n  }\n\n  return items;\n};\nfjGallery.constructor = FJGallery;\n\nexport default fjGallery;\n","import global from './utils/global';\nimport fjGallery from './fjGallery';\n\nconst $ = global.jQuery;\n\n// jQuery support\nif ('undefined' !== typeof $) {\n  // add data to jQuery .data('fjGallery')\n  const oldInit = fjGallery.constructor.prototype.init;\n  fjGallery.constructor.prototype.init = function () {\n    $(this.$container).data('fjGallery', this);\n\n    if (oldInit) {\n      oldInit.call(this);\n    }\n  };\n\n  // remove data from jQuery .data('fjGallery')\n  const oldDestroy = fjGallery.constructor.prototype.destroy;\n  fjGallery.constructor.prototype.destroy = function () {\n    if (this.$container) {\n      $(this.$container).removeData('fjGallery');\n    }\n    if (oldDestroy) {\n      oldDestroy.call(this);\n    }\n  };\n\n  const $Plugin = function (...args) {\n    Array.prototype.unshift.call(args, this);\n    const res = fjGallery.apply(global, args);\n    return 'object' !== typeof res ? res : this;\n  };\n  $Plugin.constructor = fjGallery.constructor;\n\n  // no conflict\n  const old$Plugin = $.fn.fjGallery;\n  $.fn.fjGallery = $Plugin;\n  $.fn.fjGallery.noConflict = function () {\n    $.fn.fjGallery = old$Plugin;\n    return this;\n  };\n}\n\nexport default fjGallery;\n"],"names":["win","window","global","self","delay","callback","options","_ref$noTrailing","noTrailing","_ref$noLeading","noLeading","_ref$debounceMode","debounceMode","undefined","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","cancel","_ref2$upcomingOnly","upcomingOnly","wrapper","arguments_","arguments","elapsed","Date","now","exec","apply","clear","setTimeout","rafSchd","fn","lastArgs","frameId","wrapperFn","_len","length","args","Array","_key","requestAnimationFrame","cancelAnimationFrame","Row","rowModule","exports","params","top","left","width","spacing","targetRowHeight","targetRowHeightTolerance","minAspectRatio","maxAspectRatio","edgeCaseMinRowHeight","edgeCaseMaxRowHeight","widowLayoutStyle","isBreakoutRow","items","height","prototype","addItem","itemData","newItems","concat","rowWidthWithoutSpacing","newAspectRatio","reduce","sum","item","aspectRatio","targetAspectRatio","previousRowWidthWithoutSpacing","previousAspectRatio","previousTargetAspectRatio","push","completeLayout","Object","assign","Math","abs","isLayoutComplete","newHeight","itemWidthSum","clampedToNativeRatio","clampedHeight","errorWidthPerItem","roundedCumulativeErrors","singleItemGeometry","centerOffset","indexOf","max","min","forEach","map","i","round","forceComplete","fitToWidth","rowHeight","getItems","require$$0","createNewRow","layoutConfig","layoutData","fullWidthBreakoutRowCadence","_rows","_containerHeight","containerPadding","containerWidth","right","boxSpacing","horizontal","rightToLeft","addRow","row","_layoutItems","vertical","computeLayout","itemLayoutData","laidOutItems","itemAdded","currentRow","nextToLastRowHeight","forceAspectRatio","forcedAspectRatio","some","isNaN","Error","maxNumRows","showWidows","_widowCount","bottom","containerHeight","widowCount","boxes","lib","input","config","defaults","Number","POSITIVE_INFINITY","parseFloat","_awakeItems","_inViewportItems","_leadingOrphans","_trailingOrphans","_orphans","ready","document","readyState","addEventListener","capture","once","passive","getImgDimensions","img","cb","interval","hasSize","addedListeners","onHasSize","naturalWidth","naturalHeight","clearInterval","removeListeners","onLoaded","onError","checkSize","addListeners","removeEventListener","setInterval","fjGalleryList","updateFjGallery","resize","domReady","instanceID","FJGallery","constructor","container","userOptions","$container","images","itemSelector","imageSelector","gutter","rowHeightTolerance","maxRowsCount","lastRow","transitionDuration","calculateItemsHeight","resizeDebounce","isRtl","css","onInit","onDestroy","onAppendImages","onBeforeJustify","onJustify","dataOptions","dataset","pureDataOptions","keys","key","loweCaseOption","substr","toLowerCase","pureOptions","debounce","justify","bind","init","el","styles","getComputedStyle","getPropertyValue","style","applyTransition","$item","properties","onTransitionEnd","join","addToFjGalleryList","removeFromFjGalleryList","splice","appendImages","querySelectorAll","call","$images","jQuery","get","fjGalleryImage","querySelector","$image","data","getAttribute","loadSizes","dimensions","justifyArray","justifyCount","justifiedOptions","getBoundingClientRect","justifiedData","justifiedLayout","lastItemData","gapSize","boxData","additionalTopOffset","rowsMaxHeight","imgI","pop","display","position","transform","rect","updateOptions","destroy","transition","val","fjGallery","HTMLElement","nodeType","nodeName","len","k","ret","$","oldInit","oldDestroy","removeData","$Plugin","unshift","res","old$Plugin","noConflict"],"mappings":"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"}